<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>貓咪三跑道衝刺賽</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="title">🐾 貓咪三跑道衝刺賽</div>

      <div class="hud">
        <div class="hudItem"><span class="k">玩家</span><span id="hudPlayer" class="v">玩家一</span></div>
        <div class="hudItem"><span class="k">剩餘</span><span id="hudRoundTime" class="v">20</span>s</div>
        <div class="hudItem"><span class="k">分數</span><span id="hudScore" class="v">0</span></div>

        <div class="skillHud">
          <div class="skillTop">
            <span class="k">技能(F)</span>
            <span id="hudSkillName" class="v">—</span>
          </div>
          <div class="skillBar">
            <div id="hudSkillCD" class="skillFill"></div>
          </div>
        </div>
      </div>
    </header>

    <main id="stage" class="stage">
      <canvas id="game"></canvas>

      <!-- Overlay -->
      <div id="overlay" class="overlay">
        <div id="overlayCard" class="overlayCard pop">

          <!-- Panel: Pick -->
          <section id="panelPick" class="panel">
            <h2 id="pickTitle">先選擇玩家人數（1～4）</h2>
            <p id="pickBody" class="muted">
              選好人數後，會依序讓 玩家一～玩家四 選貓（不可重複）。
            </p>

            <div id="countRow" class="countRow">
              <button class="countBtn" data-n="1">1 位</button>
              <button class="countBtn" data-n="2">2 位</button>
              <button class="countBtn" data-n="3">3 位</button>
              <button class="countBtn" data-n="4">4 位</button>
            </div>

            <div id="catGrid" class="catGrid hidden"></div>
            <p id="pickHint" class="hint hidden">選過的貓會鎖住，不能再選。</p>

            <div class="actions">
              <button id="btnRestart" class="btn ghost">重設</button>
            </div>
          </section>

          <!-- Panel: Ready -->
          <section id="panelReady" class="panel hidden">
            <h2 id="stateTitle">按「開始」進行 玩家一 回合</h2>

            <div class="controlsBox">
              <div class="controlsTitle">操作提示</div>
              <div class="controlsBody">
                <div>空白鍵：換道（往下循環）</div>
                <div>↑↓ 或 W/S：指定換道</div>
                <div>F：使用技能</div>
                <div>點一下畫面：換道（循環）</div>
              </div>
            </div>

            <div class="rulesBox">
              <div id="stateBody" class="rulesBody"></div>
              <div class="legend">
                <span>🐟 +50</span>
                <span>🍗 +100</span>
                <span>🍔 +150</span>
                <span>💣 -100</span>
                <span class="risk">⚠ 中間跑道：更危險＆食物分數加成</span>
              </div>
            </div>

            <div class="row">
              <label class="inputRow">
                每位玩家回合秒數
                <input id="roundSeconds" type="number" min="5" step="1" value="20" />
              </label>
            </div>

            <div class="actions">
              <button id="btnStart" class="btn primary">開始</button>
              <button id="btnBackToPick" class="btn ghost">回選貓</button>
            </div>

            <div id="scoreboard" class="scoreboard"></div>
          </section>

          <!-- Panel: Result -->
          <section id="panelResult" class="panel hidden">
            <h2 id="resultTitle">比賽結束！</h2>
            <div id="resultBody" class="resultBody"></div>

            <div id="podium" class="podium"></div>

            <div class="actions">
              <button id="btnRestart2" class="btn primary">再玩一場</button>
            </div>
          </section>

        </div>
      </div>
    </main>
  </div>

  <script src="game.js"></script>
</body>
</html>
